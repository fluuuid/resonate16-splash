import THREE from 'three.js'; 
import dat   from 'dat-gui' ;
import Stats from 'stats-js' ;
import UtilsP from 'utils-perf';

import transformSVGPath from './utils/transformSVGPath';

// const OrbitControls = require('three-orbit-controls')(THREE);
const GoL = require('gof-gpu');

class Demo {
  constructor(args) 
  {
    this.startStats();
    this.startGUI();

    this.renderer = null;
    this.camera   = null;
    this.scene    = null;
    this.counter  = 0;
    this.clock    = new THREE.Clock();

    this.HEIGHT = this.getHeaderHight();
    this.boxes = [];

    this.createRender();
    this.createScene();
    this.addObjects();

    this.onResize();
    this.update();
  }

  startStats()
  {
    this.stats = new Stats(); 
    this.stats.domElement.style.position = 'absolute';
    this.stats.domElement.style.top = 0;
    document.body.appendChild(this.stats.domElement);
  }

  createRender()
  {
    this.renderer = new THREE.WebGLRenderer( {
        antialias : true,
        clearColor: 0
    } );
    document.querySelector('header').appendChild(this.renderer.domElement)
  }

  createScene()
  {
    this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / this.HEIGHT, 0.01, 4000 );
    this.camera.position.set(0, 0, 200);
    // this.controls = new OrbitControls(this.camera, this.renderer.domElement);
    // this.controls.maxDistance = 500;

    this.scene = new THREE.Scene();
  }

  addObjects()
  {
    // var gridHelper = new THREE.GridHelper( 100, 10 );        
    // this.scene.add( gridHelper );

    this.texString1 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBMTM0NTM4MzZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBMTM0NTM4NDZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkExMzQ1MzgxNkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkExMzQ1MzgyNkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AV8jfQAADFJJREFUeNrsneuW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";
    this.texString2 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBMTM0NTM4NzZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBMTM0NTM4ODZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkExMzQ1Mzg1NkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkExMzQ1Mzg2NkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7mvFeAAAD6ZJREFUeNrsnY2O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";
    this.texString3 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMUM2NzA2NjZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMUM2NzA2NzZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkExMzQ1Mzg5NkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkExMzQ1MzhBNkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+0Tn1fwAABnxJREFUeNrslWuS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";
    this.texString4 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMUM2NzA2QTZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMUM2NzA2QjZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIxQzY3MDY4NkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIxQzY3MDY5NkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+PmLe3AAACNhJREFUeNrsnd1y5SYMgJHsNLMzfc6+Vd+lD7UXm24sFcyfwGAM7qXOns04DggQQvqwsYG//vn7IAJjaNvhIEZ7aMBsAO7g/KD9z+k3mwIg/mqPcppwymxn+nzGiPx0nvdpYhGnQOYswOewZxgNbpVkKSdJrmrrf4aTXNQfZMUYqagnZjnsz7uWxnJLPbi/uWSh5phKRMql48bf/8KPjalUR5ZBouVkuh9unGI2ww9ImdTM4ioK1M8lm3stlPLJMleRshZ4rQlb8WyOGz2IPk7C6ao6LEslmYHPTzAgNsF4zz6AWjNUdJI5mI/y5H2XULPzzjaQefa562CgvnFQW06zUw3FbyH5rCdHyd54iePHZ8E0Bqr+OZXFLevJui6116jxqW6ROWZwkoH62uFW82KuoIJGL5bSqLQVWTFqyk/HNguyiWUFo4523TAs+42NK3QtU6JolU9bd5cYDlTp+tIMahna0bQgqevU7bdOKScWY5kuvUjdsoSRWl03vY1Ut9V1ULcJVmXL9Qfnl6y/Tt+kbqlrdHLYmyxm0VmtwofYJl38ddK1r0RZ6Ye6pmb7L7ru6qJdInDTQns+5KLuhqUnXXt137sdl5KC2MJ5QlA03cQlb0GY3Tm1XC63HBndG7u00H5X0ZRT7vgi6gZAoI6co13maXktyUmn2a7j4OMyGJZ1dQgn4umrWNT+Kz2W0O2wS5TvnrxHoGY3R10no76r56ncuxJ3F9bc54wAsG3JQl2uI2n62/7LfE1pNHCqQYGrtpvoUhU4SVV27SH42gvxfE2ZakOrDsHXNhciisjiOJckXzt36iQf2VZyTIryzwpjGIu2pcKLZr7myOqBNaMPONwpFlyPciZhjRp9yAXzCfgT6AdGp9zzd8rX/wNfW4F4g0E9ZSlfz/D1dcJi6Maola/X+DrhHHbCyC2fKl8/5+tovlhOvjvxHVj5+gVfe7yL+prlM+XrR3wdNBJnhuN6KF8v8XXKe3L0aXjWuVggTT3mL6cGOwXYAsYqX8/xteEPY76uM0PqBijl60W+psTRpQqAJtqvfD3m6/BTDIR0VRqaV/KUr9f4msoJC1B5U+AKy8rXK3wdUNjEKXjbb0Czk5WvZ/i6uHvtzTl0O0/5aOXrAV8X9wzrAngQuJWvJ/g6HOw2F5nvjw3owM18fsN30vV5qRqjAzHK1wt8vZFzprYKOLLWO4tWvh7ydTBzaLsOKkcEKV+v83XMFe6wuHhag3BL18rXk3xd+CChe77pZ+XrJb72aazrKFiSuvcLlK/X+Lrk6GLIXHRNytfLfJ0nMs1GlrpWvn7D15GjLfKiZV764QATDwhJEbIqUehY+XqOr4E2tAlsQSn4nr3BLSYl5esXfF3cBR+ODuXrZb42F7xzLTyGhqB8PcfX0ajlHRa6mAYNVzApXw/52h9goVCgyjTSDEf5eo2vE6Fiy7ja7kL5eoWvY66Ko0fhRfl6kq/TaNv9oyu22ZY2N9gPSqpEqQdiUr5e4Gub/sNdkAYseWtIHcrXi3yNE1NM5esXfJ1X/Lf6oYl3ytcrfI2NGhdIFC9gK1+v8fVlZngBuCt+Kl8v87VfHy3zT7lU5evnfI13efrRVvl6lq93A1+GNrN9me8/Hc6GdCDtvYqfytcTfA2/mTfmLyxNlR90jvL1Al+PFtAoX7/ma/FUFgeEOKSC6kfhlK/X+TosoDk6o+wyWpWv1/maUNgaNdeQ1YpTvp7i6/iuGbxcCuE7M1S+nuTrZJ2tRY7Ag05Tvp7ha6+Znen3tv3Bx4ab5cQ9qcZdnWaTWDLpWPl6iq9dNXg35hd2WLXqT+XrZb4unsoiGXZnfZPy9Yivi7V31HJSjeisfD3H10DNmSGB//rH5OyROcgwg1G+XuPrmN3PDPmcFkp/V9vpoXy9xtfCRxfOsQ9eyterfO1z44SWlK9X+Dp4152IYDsA0b8xVg4fWX/BucrXE3xtG+KeOTQf+O6ejfL1iK/Dc+GmWkDDD/yO8vUUXxt59a4bQ215rbCjfP2cr+t381M5M6wo+FC+XudroPzKzFYx/MA3KV8P+Zry9Wi5qKMZ6/qKU74e8rVgnYqFJ3WkfH0rAdL7OmxABLcOgc+tRNzKBBd2L/uYKF8v8bUthcwvNr/xbix3XjSmfL3A1+VqUqAH+ZWvJ/g6HaNJt8AH63yVr1/xNZYpaLTOV/l6lq+zolkQ6Hidr/L1El8bHGiwPZyVr5/ydanodmB5/uIP5esxX+/hyNfBXVc9ROigtMWf41zl63m+dho7d2vEYUc1UUT5+jFfk3wdm+CB+lbj7TPiyteP+Rqvb9HMoaINHsrXU3ztK8BY6k4WdsOSytfPma+esBxy0CVrLUUrX8/ztX8yCAjre181ad9v0aJ8/ZSv8Z46x8FN+Xrw1/zeO1vIgRagzb4ZPHzVQYCx9+PK10t8fQBuLlwJju55ceXr93ydJyzNMZgVp3y9ztd5U+VEsly9gaZVLeXrFb6WwZB6lnjhR+XrGb4Gko+/SfvqYory9Ru+xs4CpXrbHOXrNb5O9o7SnJ/v76t8Pauf3Ww/jfkE82nZEWAnk7b/zRdVRf2Ur+f4Gsk10xZWLdut9srihW5Uvm7WHy+YRWMnqHw9wdc+wrF4CWyxlzJlo4b+ywqVrx/zNfYHMvX3Z1G+fsrXcdCHmaHvSb4Gazk6lK8X+DoFA3yCUB3Hr3z9jK+BrtejqW0jr67PKl87CftJHoejV+TT4MI+necaD+HBla+X+HpzwcZ8tvYzvHMXytfLfH23EL2K6crXC3x9g3d5TWnrVSnK1yt8bRpPzoKMDxGMek8MKF+P+VoGhDaZct9Ola9n+brno2tdk/L1Gl/fKJq6RKl8/YKvdza/jfmI10sBAwXLPbRO/jXK1yt8TewvblzWR7fYlpWvX/C1vDlb3jNseTpWvn7D16ZcbkC3bkv5eoWvi/0MOaPv0d3ITPl6ka+zRfNl4WnneTnl63m+rvacHXVgV9fK108F4m24lIpTvl7j65D4PwEGAH0Z/qFFpICvAAAAAElFTkSuQmCC"
    this.texString5 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMUM2NzA2RTZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMUM2NzA2RjZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIxQzY3MDZDNkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIxQzY3MDZENkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+sGwxPQAAAUlJREFUeNrs0DtWxSAUQNELFGmci7NyNk7YPIPAJbGztNqnyEpY/LLLx/vnVcuol5jPGlHX23zv4zk++xi539fMEhE5Pr5y/hhYn/ecHKxzfK3ITfbyfdY+cQ3Gfs+dZ7Xmns/Itebntlf5vU+O11r7mhnPVvsv9t/NC5e84dr5Xj53W0vuP4pnPNaCq+1Vucnzp995Qqvx3C3Paq92vZ3HebzKV+u9HTXOeaT+IdCgQQs0aNAIQIMWaNCgBRq0QIMGLdCgBRo0aIEGLdCgQQs0aIEGDVqgQQs0aNACDVqgQYMWaNACDRq0QIMWaNCgBRq0QIMGLdCgBRo0aIEGLdCgQQs0aIEGDVqgQQs0aNACDVqgQYMWaNACDRq0QIMWaNCgBRq0QIMGLdCgBRo0aIEGLdCgQQs0aIEGDVqgQQs0aNACDVp/9SPAACbvNAHqxkQbAAAAAElFTkSuQmCC"
    this.texString6 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpDRDE4RUQxRDZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpDRDE4RUQxRTZCNjgxMUU1OEE1REVGN0M0OThEQTI3MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIxQzY3MDcwNkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkNEMThFRDFDNkI2ODExRTU4QTVERUY3QzQ5OERBMjcwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XTwyIQAAAW5JREFUeNrs0MtRxDAQQEGNZCjCIAPyD4oAtpaVmJF85sipX1EgrJ/d8f351a/nz5gfazzeYlxt9dXyZ7QYsa6W4+hrXtF7i4g9W79znIO4XvUwxzFzeo1c3KPnrtdZvJflmVFntjZzS189z6qpNWtrLWz72Njr82HddO/NPzM37tdo58DaOOq0ffU8V8SZyHP2m+T2VQ/r2Lz2DGp5z3/mPa718z6k1td3nPc8X50zeci5Yi+ONn7u2XjN2nXWz+TKVn31avdX3K/0uJ7v+RlN/xJo0KAFGjRoBKBBCzRo0AINWqBBgxZo0AINGrRAgxZo0KAFGrRAgwYt0KAFGjRogQYt0KBBCzRogQYNWqBBCzRo0AINWqBBgxZo0AINGrRAgxZo0KAFGrRAgwYt0KAFGjRogQYt0KBBCzRogQYNWqBBCzRo0AINWqBBgxZo0AINGrRAgxZo0KAFGrRAgwYt0KAFGjRogQatv/oVYAC/TlvSfkzDUgAAAABJRU5ErkJggg=="

    this.material1 = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture(this.texString1)});
    this.material2 = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture(this.texString2)});
    this.material3 = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture(this.texString3)});
    this.material4 = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture(this.texString4)});
    this.material5 = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture(this.texString5)});
    this.material6 = new THREE.MeshBasicMaterial({map: THREE.ImageUtils.loadTexture(this.texString6)});

    this.mats = [this.material1, this.material2, this.material3, this.material4, this.material5, this.material6];

    this.addPlanes();
  }

  addPlanes()
  {
    this.removeAll();

    let boxSize = window.innerWidth / 100 >> 0;
    let resX = UtilsP.round(window.innerWidth / boxSize);
    let offset = (boxSize + (boxSize * .1))
    let totalWidth = offset * resX / 2;

    this.world = new GoL(resX);
    this.boxes = [];
    let counter = 0;

    this.geo = new THREE.PlaneBufferGeometry(boxSize, boxSize);

    for (var x = 0; x < resX; x++) {
        for (var y = 0; y < resX; y++) {
            var b = new THREE.Mesh(this.geo, this.mats[counter % (this.mats.length - 1)]);
            b.position.x = totalWidth - (x * offset);
            b.position.y = totalWidth - (y * offset);
            this.scene.add(b)
            this.boxes.push(b);
            counter++;
        }
    };
  }

  removeAll()
  {
    for (var i = this.boxes.length - 1; i >= 0; i--) {
        this.scene.remove(this.boxes[i]);
    };
  }

  startGUI()
  {
    // var gui = new dat.GUI()
    // gui.add(camera.position, 'x', 0, 400)
    // gui.add(camera.position, 'y', 0, 400)
    // gui.add(camera.position, 'z', 0, 400)
  }

  update()
  {
    this.stats.begin();

    if(this.world.started)
    {
      if(this.counter % 15 == 0)
      {
        let howManyActive = [];
        var grid = this.world.update();
        // +=4 as you just need the first value of the GoL 255 or 0
        for (var i = 0; i < grid.length; i+=4) {
            var line = grid[i];
            // line[a] element true/false
            var lineBoxes = this.boxes[i/4 >> 0];
            if(line == 255) howManyActive.push(i);
            lineBoxes.visible = line == 255;
        }

        if(howManyActive.length < 5)
        {
          thos.world.reset();
        }
      }

      this.counter++;
    }

    this.renderer.render(this.scene, this.camera);

    this.stats.end()
    requestAnimationFrame(this.update.bind(this));
  }

  getHeaderHight()
  {
    return window.innerHeight;
  }

  onResize()
  {
    this.HEIGHT = this.getHeaderHight();
    this.renderer.setSize(window.innerWidth, this.HEIGHT);
    this.camera.aspect = window.innerWidth / this.HEIGHT;
    this.camera.updateProjectionMatrix();
  }
}

export default Demo;